# 관리

## 코드 정리 구분

PR / Code Review 모델을 사용한다고 가정했을 때, 코드 정리를 하는 안좋은 방법은 아래와 같다.

1. 동작 변경 코드와 함께 코드 정리 내용을 넣는다.
2. 검토하던 사람들이 PR이 너무 길다고 불평한다.
3. 코드 정리 내용을 분리해서 동작 변경 PR 앞이나 뒤에 둔다.
4. 검토하는 사람들이 코드 정리만 담긴 PR에 대해 무슨 의미로 만들었는지 모르겠다고 불평한다.
5. 다시 1로 돌아간다.

코드 정리를 한다면, 어딘가에서는 처리해야 한다. <br>
이럴땐 코드 정리는 별도의 PR로 만들고, 가급적 PR당 몇 개의 코드 정리만 넣는다.

## 코드 정리의 일괄 처리량

<img width="450" alt="스크린샷 2024-07-14 오후 12 26 52" src="https://github.com/user-attachments/assets/076ed4ee-4531-4f6a-b520-5b2efa0eae10">

### 충돌

일괄 처리하는 코드 정리 작업이 많을수록, 통합 과정에서 지연 시간이 길어지고 코드 정리 작업이 다른 사람의 진행 중인 작업과 출동할 가능성도 커진다. <br>
코드 병합 과정에서 충돌이 발생할수록 작업을 병합하는 비용 또한 큰 폭으로 증가한다.

### 상호작용

다수의 코드 정리를 한 번에 처리하다가 우연히 동작 변경을 할 수도 있다. <br>
코드 정리 사이에 상호작용이 있으면 병합 비용은 급격히 증가한다.

### 추측

한 번에 처리하는 코드 정리가 많을수록 자연스럽게 더 많은 코드를 정리하게 된다. 그로 인해 예상치 못한 추가 비용이 발생한다.

<br>

> 여러분과 여러분의 팀은 검토 비용을 제대로 줄일 수 있는 방법을 찾아야 한다. <br>
> 팀에 신뢰와 강력한 문화가 있다면 코드 정리 후에는 굳이 검토할 필요가 없다. <br>
> 검토하지 않더라도 코드 정리가 소프트웨어 안정을 해치지 않으면 상호작용의 위험이 줄어든다.

## 코드 정리 시점

### 코드 정리를 하지 말아야 할 때

- 앞으로 다시는 코드를 변경하지 않을 때
- 설계를 개선하더라도 배울 것이 없을 때

### 정리를 미뤄야 할 때

- 정리할 코드 분량이 많은데, 보상이 바로 보이지 않을 때
- 코드 정리에 대한 보상이 잠재적일 때
- 작은 묶음으로 여러 번에 나눠서 코드 정리를 할 수 있을 때

### 동작 변경 후에 정리해야 할 때

- 다음 코드 정리까지 기다릴수록 비용이 더 불어날 때
- 코드 정리를 하지 않으면 일을 끝냈다는 느낌이 들지 않을 때

### 코드 정리 후 동작 변경을 할 때

- 코드 정리를 했을 때, 코드 이해가 쉬워지거나 동작 변경이 쉬워지는 즉각적인 효과를 얻을 때
- 어떤 코드를 정리해야 하는지 알고 있을 때


















